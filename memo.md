# バグ

- ios でフォルダー名更新にフォーカスしたとき、画面がずれる。

# リファクタリングメモ

- organism のコンポーネントに処理をもたせられるものは持たせる。
- タスクフォルダーリストプロップスのプロパティ名を taskFolders にする。
- フォルダリストページの props をコンテキストに分ける
- タスクフォルダーリストコンテキストを作成する。
- task-folder と folders を統合する。
- カスタムフックスの中で useContext を使用するのは再レンダリング抑制やテストの際に不便かも

- タスクの再利用できそうな処理をカスタムフックスにする。(選択とか)
- タスク追加時に画面を一番上にスクロールする。
- css にコメントつける

- タスクフォルダーの再利用できそうな処理をカスタムフックスにする。(選択とか)
- 非同期でできる処理は非同期で実行する。
- タスクフォルダー削除時、タスクコレクションも削除する
- null と undefine のとき true を返す共通関数を作成する。
- フォルダー名の上限文字数を上げる

- test-id 属性消せるようにする
- 再レンダリングを抑制する
- 不要な通信処理が行われていないか確認
- リポジトリにてエラーちゃんと表示する
- keyProps を削除する。
- パフォーマンス対策をする。

# ルール

## コンポーネントの分け方

- Atoms
  それ以上意味的に分けることのできない最小のコンポーネント。
  DB に関する処理は持たない。
- Molecules
  複数の Atoms を組み合わせて作成する。
  Organisms が提供するコンテンツの一部として使われるもの。
  DB に関する処理は持たない。
- Organisms
  複数の Atoms、Molecules、Organisms を組み合わせて作成する。
  「Todos」において、単体でコンテンツとして成り立っているもの。
  DB に関する処理を持てる。
- Templates
  複数の Organisms を組み合わせて一つの画面を作成する。
  コンテンツ（Organisms）を組み合わせてレイアウトを作成する。
  DB に関する処理を持てる。
- Pages
  Template 一つにつき、一つ作成される。
  機能そのもの。
  ルーティングで呼び出されたり、機能全体で必要な初期処理などを実行する。
  DB に関する処理を持てる。

## フォーマット

- コンポーネント内の処理は種類ごとにまとめ、以下のコメントを付ける。
  - //hooks
  - //state
  - //effect
  - //function
- ファイル名はスネークケースにする。
  - カスタムフックのファイル名は「hoge-fuga-hook」
- フォルダ名はローワーキャメルケースにする。

## props

- onClick を実行するコンポーネントが受け取るのは onClickProps、それ以外は handlerProps を受け取る

## フォーム

- フォームパーツは、一つのページで共通化する(FormProvider と useFormContext を使用する)
- フォームは親コンポーネントからコンテキストを介してパーツを受け取る
- サブミットの送信はフォーム、サブミット時の処理は親から受け取る

## リポジトリ

- インターフェースを定義し、そのインターフェースを継承したリポジトリクラスを作成する。
- リポジトリのインスタンスは、カスタムフックスの中でのみ呼び出す。
- firebase のコレクション名には定数を作成する。
- リポジトリの関数には doc をつける

## CSS

- 共通の css は common/css/common-style.ts にまとめる
